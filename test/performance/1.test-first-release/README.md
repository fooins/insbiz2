# 新系统上线压测<!-- omit in toc -->

压测目的：新系统上线压测以探知系统能力。  
最终结论：达标

## 1. 目标

- 每秒处理交易数（保单）达到 20 TPS。
- 接口平均响应时长小于 3 秒。
- 接口成功率不低于 99.4%。

## 2. 方案

使用工具：[JMeter(5.5)](https://github.com/itabbot/learn/blob/main/性能测试/1.测试工具/1.1.JMeter.md)

基本思路：

- 压测环境：直接在生产环境测试，最后重置数据。
- 数据量：构造一年左右数据，约 800 万保单和 400 万理赔单。
- 业务模型：报价、承保、保单查询以及理赔申请各接口请求量比例为 `2:4:2:1`。
- 串联链路：先执行报价，然后承保，成功后查询保单；理赔申请单独触发不串联。

监控要点：

- 整体功能是否能正常使用。
- TPS 曲线是否稳定，有无大幅度波动。
- 操作系统各指标是否正常：CPU、内存、磁盘吞吐量和网络吞吐量。
- 数据库各指标是否正常：SQL 耗时、命中率、锁等待次数和锁等待时间。

## 3. 实施

1. [构造基础数据](./实施/构造基础数据.md)。
2. [构造参数化数据](./实施/构造参数化数据.md)。
3. [JMeter 压测](./实施/JMeter压测.md)。
4. [压测记录及分析](./实施/压测记录及分析.md)。
5. [重置数据](./实施/重置数据.md)。
